<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ù¾Ø§Ø²Ù„ Ù†ÙˆØ±Ù‡Ø§ - Ù†Ø³Ø®Ù‡ Ù¾ÛŒØ´Ø±ÙØªÙ‡</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Vazirmatn&display=swap');

  /* Ø±ÛŒØ³Øª Ø§ÙˆÙ„ÛŒÙ‡ */
  * {
    box-sizing: border-box;
  }

  body {
    margin: 0; padding: 0;
    background: #111;
    font-family: 'Vazirmatn', Tahoma, sans-serif;
    color: #eee;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    user-select: none;
    overflow-x: hidden;
    direction: rtl;
  }

  h1 {
    margin: 25px 0 5px;
    font-weight: 700;
    text-align: center;
    font-size: 2.8rem;
    color: #ffd700;
    text-shadow: 0 0 8px #ffec41;
  }

  #grid {
    margin-top: 20px;
    display: grid;
    gap: 7px;
    filter: drop-shadow(0 0 7px #ffde59);
    touch-action: manipulation;
  }

  .cell {
    width: 55px;
    height: 55px;
    background: #222;
    border-radius: 10px;
    border: 2px solid #555;
    cursor: pointer;
    box-shadow: inset 0 0 6px #000;
    transition: background-color 0.3s, box-shadow 0.6s;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .cell.on {
    background: #ffd700;
    box-shadow:
      0 0 18px 5px #fff755,
      inset 0 0 20px #ffffa0;
    animation: pulse 1.8s infinite;
  }

  @keyframes pulse {
    0%, 100% { box-shadow: 0 0 10px 3px #fff755, inset 0 0 15px #ffffa0; }
    50% { box-shadow: 0 0 25px 7px #fff; inset 0 0 30px #fffacd; }
  }
    /* HEADER */
    header {
      position: fixed;
      top: 0; left: 0; right: 0;
      background: rgba(40, 39, 57, 0.95);
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
      font-weight: 900;
      letter-spacing: 3px;
      color: #ffcc00;
      z-index: 1100;
      user-select: none;
      font-family: 'Vazirmatn', sans-serif;
      text-shadow: 1px 1px 5px #222;
      animation: glow 3s ease-in-out infinite alternate;
    }
    @keyframes glow {
      from { text-shadow: 0 0 5px #ffcc00; }
      to { text-shadow: 0 0 20px #ffea00; }
    }
    /* Ø²ÛŒØ±Ù†ÙˆÛŒØ³ Ú†Ø±Ø®Ø´ÛŒ */
    #marqueeWrapper {
      position: fixed;
      bottom: 0;
      width: 100%;
      background: #000000cc;
      padding: 6px 0;
      overflow: hidden;
      z-index: 1150;
      user-select: none;
    }
    #marqueeText {
      display: inline-block;
      white-space: nowrap;
      color: gold;
      font-weight: 700;
      font-size: 1.1rem;
      animation: marqueeAnim 15s linear infinite;
      text-shadow: 0 0 10px #ffcc00;
      font-family: 'Vazirmatn', sans-serif;
      letter-spacing: 1.3px;
    }
    @keyframes marqueeAnim {
      0% {
        transform: translateX(100%);
      }
      100% {
        transform: translateX(-100%);
      }
    }
    /* FOOTER */
    footer {
      position: fixed;
      bottom: 30px; /* Ø²ÛŒØ± Ø²ÛŒØ±Ù†ÙˆÛŒØ³ Ø¨Ø§Ø´Ù‡ */
      left: 0; right: 0;
      background: rgba(0, 0, 0, 0.7);
      padding: 10px 0;
      font-size: 0.9rem;
      text-align: center;
      color: #ddd;
      font-weight: 500;
      font-family: 'Vazirmatn', sans-serif;
      user-select: none;
      box-shadow: inset 0 1px 10px rgba(255, 255, 255, 0.1);
      z-index: 1100;
    }

    /* MENU ICON */
    #menuToggle {
      position: fixed;
      top: 12px; left: 12px;
      font-size: 2.5rem;
      color: #ffcc00;
      cursor: pointer;
      z-index: 1200;
      user-select: none;
      transition: color 0.3s ease;
      text-shadow: 0 0 6px #ffcc00;
    }
    #menuToggle:hover {
      color: #fff03c;
    }
    /* OVERLAY */
    #overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.8);
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease;
      z-index: 1150;
    }
    #overlay.active {
      opacity: 1;
      visibility: visible;
    }
    /* SIDE MENU */
    #sideMenu {
      position: fixed;
      top: 0; left: 0;
      height: 100vh;
      width: 80vw;
      max-width: 450px;
      background: linear-gradient(180deg, #232526, #1c1c1c);
      box-shadow: 4px 0 15px rgba(0,0,0,0.8);
      padding: 25px 30px;
      transform: translateX(-100%);
      transition: transform 0.35s ease;
      overflow-y: auto;
      z-index: 1200;
      border-top-right-radius: 20px;
      border-bottom-right-radius: 20px;
      color: #ddd;
      font-size: 1.05rem;
      user-select: text;
    }
    #sideMenu.active {
      transform: translateX(0);
    }
    /* MENU SECTIONS */
    #sideMenu h2 {
      font-size: 1.6rem;
      font-weight: 900;
      color: #ffcc00;
      margin-bottom: 20px;
      text-align: center;
      text-shadow: 0 0 7px #ffcc00;
    }
    .menuSection {
      margin-bottom: 25px;
    }
    .menuSection label {
      font-weight: 700;
      display: block;
      margin-bottom: 10px;
      color: #ffd633;
      user-select: none;
    }
    .menuSection textarea {
      width: 100%;
      height: 110px;
      background: #2c2c2c;
      border: none;
      border-radius: 12px;
      padding: 12px 14px;
      resize: vertical;
      font-family: 'Vazirmatn', sans-serif;
      font-size: 1rem;
      color: #fff;
      box-shadow: inset 0 0 8px #000;
      transition: box-shadow 0.3s ease;
    }
    .menuSection textarea:focus {
      outline: none;
      box-shadow: inset 0 0 12px #ffcc00;
      background: #3c3c3c;
    }
    
    /* Ù…ØªÙ† Ø®Ø±ÙˆØ¬ÛŒ Ø¬Ø°Ø§Ø¨ */
    .outputBox {
      margin-top: 10px;
      background: #1a1a1a;
      border-radius: 14px;
      padding: 15px 18px;
      font-size: 1rem;
      line-height: 1.45;
      color: #ffee77;
      box-shadow: 0 0 10px #ffcc00aa;
      min-height: 100px;
      white-space: pre-wrap;
      user-select: text;
    }
    /* Ø¯Ú©Ù…Ù‡ Ù‡Ø§ */
    .menuBtn {
      display: block;
      width: 100%;
      background: #ffcc00;
      border: none;
      padding: 12px 0;
      margin-top: 12px;
      border-radius: 18px;
      font-weight: 900;
      font-size: 1.15rem;
      color: #222;
      cursor: pointer;
      box-shadow: 0 0 10px #ffcc00aa;
      transition: background-color 0.3s ease;
      user-select: none;
    }
    .menuBtn:hover {
      background: #ffd633;
    }
    /* Ù‚Ø³Ù…Øª Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù† */
    #supportBox {
      font-size: 1rem;
      color: #ffe066;
      line-height: 1.4;
      border-radius: 14px;
      background: #222222ee;
      padding: 14px 18px;
      box-shadow: inset 0 0 8px #ffcc00cc;
      margin-bottom: 15px;
      user-select: text;
    }
    #supportBox a {
      color: #ffcc00;
      text-decoration: none;
      font-weight: 700;
      transition: color 0.3s ease;
    }
    #supportBox a:hover {
      color: #fff03c;
    }
    /* Ø¯Ú©Ù…Ù‡ Ø®Ø±ÙˆØ¬ */
    #closeMenuBtn {
      background: #ff4444;
      color: white;
      font-weight: 900;
      box-shadow: 0 0 10px #ff4444aa;
    }
    #closeMenuBtn:hover {
      background: #ff0000;
    }
    /* MAIN CONTENT */
    main {
      margin-top: 20px;
      max-width: 480px;
      width: 90vw;
      background: rgba(255 255 255 / 0.1);
      border-radius: 25px;
      box-shadow: 0 0 30px #ffcc00cc;
      padding: 30px 25px;
      user-select: none;
      color: #fff;
      text-align: center;
      font-weight: 600;
    }
    main h3 {
      font-size: 1.5rem;
      margin-bottom: 25px;
      letter-spacing: 1.1px;
      user-select: text;
      text-shadow: 1px 1px 6px #000;
    }
    main input[type="text"], main input[type="number"] {
      width: 80%;
      padding: 12px 15px;
      font-size: 1.1rem;
      border-radius: 14px;
      border: none;
      outline: none;
      margin-bottom: 20px;
      text-align: center;
      font-family: 'Vazirmatn', sans-serif;
      box-shadow: inset 0 0 8px #000;
      transition: box-shadow 0.3s ease;
      user-select: text;
      background: #222;
      color: #ffd633;
      font-weight: 700;
    }
    main input[type="text"]:focus, main input[type="number"]:focus {
      box-shadow: inset 0 0 14px #ffcc00;
      background: #3c3c3c;
    }
    main button#runBtn {
      background: #ffcc00;
      color: #222;
      font-weight: 900;
      font-size: 1.2rem;
      padding: 14px 0;
      width: 60%;
      border-radius: 30px;
      cursor: pointer;
      box-shadow: 0 0 20px #ffcc00cc;
      transition: background-color 0.3s ease;
      user-select: none;
    }
    main button#runBtn:hover {
      background: #ffd633;
    }
    /* Ù¾ÛŒØ§Ù… Ø®Ø·Ø§ / Ø®Ø±ÙˆØ¬ÛŒ */
    #result {
      margin-top: 22px;
      min-height: 70px;
      font-size: 1rem;
      color: #ffeeaa;
      background: #222;
      padding: 14px 18px;
      border-radius: 16px;
      user-select: text;
      box-shadow: inset 0 0 10px #ffcc00cc;
      white-space: pre-wrap;
      text-align: center;
    }
    /* Scrollbar Ø¯Ø± Ù…Ù†Ùˆ */
    #sideMenu::-webkit-scrollbar {
      width: 8px;
    }
    #sideMenu::-webkit-scrollbar-thumb {
      background-color: #ffcc00bb;
      border-radius: 10px;
    }
  button {
    background: #333;
    border: none;
    border-radius: 12px;
    padding: 14px 28px;
    color: #ffd700;
    font-weight: 600;
    font-size: 1.1rem;
    cursor: pointer;
    margin: 25px 10px 40px;
    box-shadow: 0 0 12px #ffec41;
    transition: background-color 0.3s ease;
    user-select: none;
  }

  button:hover {
    background: #555;
  }

  #info {
    width: 320px;
    max-width: 90vw;
    display: flex;
    justify-content: space-between;
    font-size: 1.15rem;
    margin-bottom: 10px;
    user-select: none;
  }

  #clickCount, #timer {
    background: #222;
    padding: 8px 16px;
    border-radius: 12px;
    box-shadow: inset 0 0 10px #000;
    width: 45%;
    text-align: center;
    font-weight: 500;
  }

  /* ØªØ§ÛŒÙ…Ø± Ø±Ù†Ú¯ÛŒ */
  #timer.green { background-color: #1b5e20; color: #a5d6a7; box-shadow: 0 0 15px #4caf50;}
  #timer.yellow { background-color: #f9a825; color: #fffde7; box-shadow: 0 0 15px #ffeb3b;}
  #timer.orange { background-color: #ef6c00; color: #fff3e0; box-shadow: 0 0 15px #ff9800;}
  #timer.red { background-color: #b71c1c; color: #ffcdd2; box-shadow: 0 0 15px #f44336;}
  #timer.blink {
    animation: blink 1s infinite;
  }
  @keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }

  /* Ù¾Ø§Ù¾â€ŒØ¢Ù¾ ØªÙ†Ø¸ÛŒÙ…Ø§Øª */
  #settingsOverlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.82);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 999;
    animation: fadeScaleIn 0.4s ease forwards;
  }

  @keyframes fadeScaleIn {
    0% {opacity: 0; transform: scale(0.8);}
    100% {opacity: 1; transform: scale(1);}
  }

  #settingsModal {
    background: #222;
    border-radius: 18px;
    padding: 50px 60px 60px;  /* Ù¾Ø¯ÛŒÙ†Ú¯ Ø¨ÛŒØ´ØªØ± Ø¨Ø±Ø§ÛŒ ÙØ¶Ø§ÛŒ Ø¯Ø§Ø®Ù„ÛŒ Ø¨ÛŒØ´ØªØ± */
    box-shadow: 0 0 30px #ffde59;
    max-width: 600px;         /* Ø¹Ø±Ø¶ Ù…Ø§Ú©Ø²ÛŒÙ…Ù… Ø¨ÛŒØ´ØªØ± */
    width: 95vw;              /* Ø¨Ø±Ø§ÛŒ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² Ù¾Ø± Ø´Ø¯Ù† ÙØ¶Ø§ÛŒ Ø¨ÛŒØ´ØªØ± */
    color: #ffd700;
    text-align: center;
  }

  #settingsModal h2 {
    margin-bottom: 18px;
    font-weight: 700;
    font-size: 2rem;
    text-shadow: 0 0 12px #ffde59;
  }

  label {
    display: block;
    margin: 18px 0 8px;
    font-size: 1.15rem;
    font-weight: 600;
  }

  select {
    width: 100%;
    padding: 9px 12px;
    font-size: 1rem;
    border-radius: 12px;
    border: none;
    background: #444;
    color: #ffd700;
    box-shadow: inset 0 0 10px #000;
    cursor: pointer;
    user-select: none;
  }

  .difficulty-options {
    display: flex;
    overflow-x: auto;
    white-space: nowrap;
    gap: 8px;
    padding-bottom: 8px;
    scrollbar-width: none; /* ÙØ§ÛŒØ±ÙØ§Ú©Ø³ */
  }
  .difficulty-options label {
    flex: 1;
    margin: 5PX 5px;
    cursor: pointer;
    background: #333;
    padding: 8px 6px;
    border-radius: 10px;
    box-shadow: 0 0 8px #444;
    transition: background-color 0.25s;
  }
  .difficulty-options input[type="radio"] {
    display: none;
  }
  .difficulty-options input[type="radio"]:checked + label {
    background: #ffd700;
    color: #222;
    box-shadow: 0 0 15px #fff176;
    font-weight: 700;
  }

  /* Ù¾ÛŒØ§Ù… Ø±Ú©ÙˆØ±Ø¯ */
  #recordBoard {
    margin-top: -10px;
    margin-bottom: 15px;
    font-size: 0.95rem;
    color: #fff176;
    user-select: none;
    max-width: 350px;
    width: 90vw;
    text-align: center;
  }
</style>
</head>
<body>

  <h1>ğŸ® Ú†Ø§Ù„Ø´ Ú†Ø±Ø§Øºâ€ŒÙ‡Ø§ ğŸ®</h1>
  <div id="pulseText"></div>


<div id="menuToggle" title="Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù…Ù†Ùˆ">â˜°</div>
<div id="overlay"></div>

<nav id="sideMenu" aria-label="Ù…Ù†ÙˆÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡">
  <h2>Ù…Ù†ÙˆÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡</h2>

  <section class="menuSection">
    <label for="descInput">ğŸ“ Ù†Ø¸Ø±Ø§Øª Ùˆ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª :</label>
    <textarea id="descInput" placeholder="Ø§ÛŒÙ†Ø¬Ø§ Ù…ØªÙ† Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯..."></textarea>
    <button class="menuBtn" onclick="showDescription()">Ù†Ù…Ø§ÛŒØ´ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø¨Ø§Ø²ÛŒ</button>
    <div id="descOutput" class="outputBox" aria-live="polite" aria-atomic="true"></div>
  </section>

  <section class="menuSection">
    <label>ğŸ“š Ø¢Ù…ÙˆØ²Ø´ Ù†Ø­ÙˆÙ‡ Ø§Ù†Ø¬Ø§Ù… Ø¨Ø§Ø²ÛŒ :</label>
    <button class="menuBtn" onclick="showUsage()">Ù†Ù…Ø§ÛŒØ´ Ø±ÙˆØ´ Ø§Ù†Ø¬Ø§Ù… Ø¨Ø§Ø²ÛŒ</button>
    <div id="usageOutput" class="outputBox" aria-live="polite" aria-atomic="true"></div>
  </section>

  <section class="menuSection">
    <label>ğŸ§‘â€ğŸ’» Ø¨Ø§ Ø³Ø§Ø²Ù†Ø¯Ù‡ Ø¢Ø´Ù†Ø§ Ø´ÙˆÛŒØ¯ :</label>
    <button class="menuBtn" onclick="showTeacher()">Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³Ø§Ø²Ù†Ø¯Ù‡ </button>
    <div id="teacherOutput" class="outputBox" aria-live="polite" aria-atomic="true"></div>
  </section>

  <section class="menuSection" id="supportBox">
    <label>ğŸ“ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù¾Ø´ØªÛŒØ¨Ø§Ù† :</label>
    <p>
      Ù…Ù† Ø§Ù…ÛŒØ±Ø­Ø³ÛŒÙ† Ø§Ù…Ø§Ù†ÛŒ Ù‡Ø³ØªÙ….<br />
      </p>
      Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³: <a href="tel:09102247414" target="_blank" rel="noopener noreferrer">09102247414</a>
      </p>
      Ø§ÛŒÙ…ÛŒÙ„ Ù…Ù†: <a href="https://a42464849@gmail.com" target="_blank" rel="noopener noreferrer">a42464849@gmail.com</a>
      </p>
      Ø³Ø§ÛŒØª Ù…Ù†: <a href="https://virgool.io/@m_77898233" target="_blank" rel="noopener noreferrer">https://virgool.io/@m_77898233</a>
    </p>
  </section>

  <button id="closeMenuBtn" class="menuBtn" onclick="closeMenu()">Ø®Ø±ÙˆØ¬ Ø§Ø² Ù…Ù†Ùˆ</button>
</nav>



<!-- Ù…ØªÙ† Ø«Ø§Ø¨Øª Ø¨Ø§Ù„Ø§ÛŒ Ø²ÛŒØ±Ù†ÙˆÛŒØ³ -->
<div style="position: fixed; bottom: 60px; width: 100%; text-align: center; color: #ffcc00; font-weight: 700; font-family: 'Vazirmatn', sans-serif; user-select: none; text-shadow: 0 0 6px #ffcc00;">
 Ù†ÙˆÛŒÙ†ØŒ Ø³Ø§Ø®ØªÙ‡â€ŒÛŒ Ø§Ù…ÛŒØ±Ø­Ø³ÛŒÙ† Ø§Ù…Ø§Ù†ÛŒØŒ Ù¾Ù„ÛŒ Ø¨Ù‡ Ø¯Ù†ÛŒØ§ÛŒ Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯ Ùˆ Ø®Ù„Ø§Ù‚Ø§Ù†Ù‡ Ø´Ù…Ø§Ø³Øª.
</div>

<!-- Ø²ÛŒØ±Ù†ÙˆÛŒØ³ Ú†Ø±Ø®Ø´ÛŒ -->
<div id="marqueeWrapper" aria-label="Ø²ÛŒØ±Ù†ÙˆÛŒØ³ Ú†Ø±Ø®Ø´ÛŒ">
  <div id="marqueeText">ğŸŒŸ Ú†Ø§Ù„Ø´ Ú†Ø±Ø§Øºâ€ŒÙ‡Ø§ØŒ Ø¨Ø§Ø²ÛŒ Ù‡ÛŒØ¬Ø§Ù†â€ŒØ§Ù†Ú¯ÛŒØ² Ùˆ ÙÚ©Ø±ÛŒ Ø¨Ø±Ø§ÛŒ ØªÙ‚ÙˆÛŒØª ØªÙ…Ø±Ú©Ø² Ùˆ Ø³Ø±Ø¹Øª Ø¹Ù…Ù„ Ø´Ù…Ø§! ğŸŒŸ &nbsp; &nbsp; ğŸŒŸ Ø§ÛŒÙ† Ø¨Ø§Ø²ÛŒ Ø¬Ø°Ø§Ø¨ Ùˆ Ú†Ø§Ù„Ø´â€ŒØ¨Ø±Ø§Ù†Ú¯ÛŒØ²ØŒ Ø°Ù‡Ù† Ø´Ù…Ø§ Ø±Ø§ Ø¨Ù‡ ØªØ­Ø±Ú© ÙˆØ§Ù…ÛŒâ€ŒØ¯Ø§Ø±Ø¯ ğŸŒŸ &nbsp; &nbsp;</div>
</div>

  <div id="info">
    <div id="clickCount">Ú©Ù„ÛŒÚ©â€ŒÙ‡Ø§: 0</div>
    <div id="timer" class="green">Ø²Ù…Ø§Ù†: 0 Ø«Ø§Ù†ÛŒÙ‡</div>
  </div>

  <div id="grid"></div>

  <div>
    <button id="restartBtn">Ø´Ø±ÙˆØ¹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ ğŸ”„</button>
    <button id="changeSettingsBtn">ØªØºÛŒÛŒØ± Ù…Ø­ÛŒØ· âš™ï¸</button>
  </div>

  <div id="recordBoard"></div>

  <!-- Ù¾Ø§Ù¾â€ŒØ¢Ù¾ ØªÙ†Ø¸ÛŒÙ…Ø§Øª -->
  <div id="settingsOverlay">
    <div id="settingsModal">
      <h2>ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ø§Ø²ÛŒ</h2>

      <label for="gridSizeSelect">Ø§Ù†Ø¯Ø§Ø²Ù‡ Ø´Ø¨Ú©Ù‡ (Ù…Ø±Ø¨Ø¹ Û³ ØªØ§ Û±Û°):</label>
      <select id="gridSizeSelect" aria-label="Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ù†Ø¯Ø§Ø²Ù‡ Ø´Ø¨Ú©Ù‡">
        <!-- Ø¢Ù¾Ø´Ù†â€ŒÙ‡Ø§ Ø¨Ø§ Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒØ´Ù‡ -->
      </select>

      <label>Ø³Ø·Ø­ Ø³Ø®ØªÛŒ:</label>
      <div class="difficulty-options" role="radiogroup" aria-label="Ø³Ø·Ø­ Ø³Ø®ØªÛŒ">
        <input type="radio" id="diff1" name="difficulty" value="1" />
        <label for="diff1">Ø®ÛŒÙ„ÛŒ Ø¢Ø³ÙˆÙ†</label>
        <input type="radio" id="diff2" name="difficulty" value="2" />
        <label for="diff2">Ø¢Ø³ÙˆÙ†</label>
        <input type="radio" id="diff3" name="difficulty" value="3" checked />
        <label for="diff3">Ù…ØªÙˆØ³Ø·</label>
        <input type="radio" id="diff4" name="difficulty" value="4" />
        <label for="diff4">Ø³Ø®Øª</label>
        <input type="radio" id="diff5" name="difficulty" value="5" />
        <label for="diff5">Ø®ÛŒÙ„ÛŒ Ø³Ø®Øª</label>
      </div>

      <button id="startGameBtn" style="margin-top:25px;">Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ ğŸ²</button>
    </div>
  </div>

<script>
  const menuToggle = document.getElementById('menuToggle');
  const sideMenu = document.getElementById('sideMenu');
  const overlay = document.getElementById('overlay');

  menuToggle.addEventListener('click', () => {
    sideMenu.classList.add('active');
    overlay.classList.add('active');
  });

  overlay.addEventListener('click', () => {
    closeMenu();
  });

  function closeMenu() {
    sideMenu.classList.remove('active');
    overlay.classList.remove('active');
    // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø®Ø±ÙˆØ¬ÛŒ Ù‡Ø§ Ùˆ textarea
    document.getElementById('descOutput').textContent = '';
    document.getElementById('usageOutput').textContent = '';
    document.getElementById('teacherOutput').textContent = '';
    document.getElementById('descInput').value = '';
  }

  // ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¨Ø§ Ø´Ú©Ù„Ú© Ùˆ Ù…ØªÙ† Ø¬Ø°Ø§Ø¨
  function showDescription() {
    const inputText = document.getElementById('descInput').value.trim();
    if (!inputText) {
      alert('Ù„Ø·ÙØ§Ù‹ Ø§Ø¨ØªØ¯Ø§ Ù…ØªÙ†ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.');
      return;
    }
    const output = `
ğŸ® Ù¾Ø§Ø²Ù„ Ù†ÙˆØ±Ù‡Ø§ ÛŒÚ© Ø¨Ø§Ø²ÛŒ ÙÚ©Ø±ÛŒ Ùˆ Ø¬Ø°Ø§Ø¨Ù‡ Ú©Ù‡ Ø°Ù‡Ù†Øª Ø±Ùˆ Ø¨Ù‡ Ú†Ø§Ù„Ø´ Ù…ÛŒâ€ŒÚ©Ø´Ù‡!

ğŸ§   Ù‡Ø¯ÙØª Ø®Ø§Ù…ÙˆØ´ Ú©Ø±Ø¯Ù† Ù‡Ù…Ù‡ Ú†Ø±Ø§Øºâ€ŒÙ‡Ø§Ø³ØªØŒ ÙˆÙ„ÛŒ Ù‡Ø± Ú©Ù„ÛŒÚ©ØŒ Ú†Ø±Ø§Øºâ€ŒÙ‡Ø§ÛŒ Ø§Ø·Ø±Ø§Ù Ø±Ùˆ Ù‡Ù… ØªØºÛŒÛŒØ± Ù…ÛŒâ€ŒØ¯Ù‡!

âœ¨ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¬Ø°Ø§Ø¨ Ø¨Ø§Ø²ÛŒ:

    ğŸ“ Ù‚Ø§Ø¨Ù„ÛŒØª Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ù†Ø¯Ø§Ø²Ù‡ Ø´Ø¨Ú©Ù‡ Ø§Ø² Û³Ã—Û³ ØªØ§ Û±Û°Ã—Û±Û°

    ğŸ¯ Ø³Ø·ÙˆØ­ Ø³Ø®ØªÛŒ Ù…ØªÙ†ÙˆØ¹ Ø§Ø² Ø®ÛŒÙ„ÛŒ Ø¢Ø³ÙˆÙ† ØªØ§ Ø®ÛŒÙ„ÛŒ Ø³Ø®Øª

    â° ØªØ§ÛŒÙ…Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø¨Ø§ Ø§ÙÚ©Øªâ€ŒÙ‡Ø§ÛŒ Ø±Ù†Ú¯ÛŒ 

    ğŸ† Ø³ÛŒØ³ØªÙ… Ø«Ø¨Øª Ø±Ú©ÙˆØ±Ø¯ Ùˆ Ú†Ø§Ù„Ø´ Ø¨Ø§ Ø®ÙˆØ¯ØªØ§Ù†

    ğŸŒ™ Ø·Ø±Ø§Ø­ÛŒ Ø²ÛŒØ¨Ø§ØŒ Ø§ÙÚ©Øªâ€ŒÙ‡Ø§ÛŒ Ø¬Ø°Ø§Ø¨ØŒ Ùˆ Ù…Ø­ÛŒØ· Ú†Ø´Ù…â€ŒÙ†ÙˆØ§Ø²

ğŸ”„ Ø¨Ø§ Ù‡Ø± Ø¨Ø§Ø± Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒØŒ Ú†ÛŒØ¯Ù…Ø§Ù† Ú†Ø±Ø§Øºâ€ŒÙ‡Ø§ Ù…ØªÙØ§ÙˆØª Ø§Ø³Øª Ùˆ Ø°Ù‡Ù† Ø´Ù…Ø§ Ø¨Ù‡ ÛŒÚ© Ù…Ø§Ø¬Ø±Ø§Ø¬ÙˆÛŒÛŒ Ø¬Ø¯ÛŒØ¯ Ø¯Ø¹ÙˆØª Ù…ÛŒâ€ŒØ´ÙˆØ¯!
Ø§Ú¯Ø± Ø¹Ø§Ø´Ù‚ Ù¾Ø§Ø²Ù„ØŒ Ù…Ù†Ø·Ù‚ Ùˆ Ù†ÙˆØ± Ù‡Ø³ØªÛŒØ¯ØŒ Ø§ÛŒÙ† Ø¨Ø§Ø²ÛŒ Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§ Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ ğŸ’¡

Ø¯Ø± Ù‡Ø± Ø²Ù…Ø§Ù† Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ø¯Ú©Ù…Ù‡ ØªØºÛŒØ± Ù…Ø­ÛŒØ·ØŒ Ø¨Ø§Ø²ÛŒ Ø±Ø§ Ø´Ø®ØµÛŒâ€ŒØ³Ø§Ø²ÛŒ Ú©Ø±Ø¯Ù‡ Ùˆ Ú†Ø§Ù„Ø´ Ø¬Ø¯ÛŒØ¯ÛŒ Ø¨Ø³Ø§Ø²ÛŒØ¯.

ğŸ’¬ Ø§Ú¯Ø± Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ Ø¯Ø§Ø´ØªÛŒØ¯ØŒ Ø®ÙˆØ´Ø­Ø§Ù„ Ù…ÛŒâ€ŒØ´ÙˆÛŒÙ… Ø¨Ø´Ù†ÙˆÛŒÙ…!  
    `;
    document.getElementById('descOutput').textContent = output;
  }

  // Ø±ÙˆØ´ Ø§Ø³ØªÙØ§Ø¯Ù‡
  function showUsage() {
    const output = `
ğŸ“Œ Ø±ÙˆØ´ Ø§Ù†Ø¬Ø§Ù… Ø¨Ø§Ø²ÛŒ:

1ï¸âƒ£ Ø§Ù†Ø¯Ø§Ø²Ù‡ Ø´Ø¨Ú©Ù‡ Ùˆ Ø³Ø·Ø­ Ø³Ø®ØªÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.
2ï¸âƒ£ Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø®Ø§Ù†Ù‡â€ŒÙ‡Ø§ØŒ Ú†Ø±Ø§Øºâ€ŒÙ‡Ø§ Ø±Ø§ Ø®Ø§Ù…ÙˆØ´ ÛŒØ§ Ø±ÙˆØ´Ù† Ú©Ù†ÛŒØ¯.
3ï¸âƒ£ Ù‡Ø¯Ù Ø´Ù…Ø§ Ø®Ø§Ù…ÙˆØ´ Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… Ú†Ø±Ø§Øºâ€ŒÙ‡Ø§ Ø¯Ø± Ú©Ù…ØªØ±ÛŒÙ† ØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ÛŒÚ© Ùˆ Ø²Ù…Ø§Ù† Ù…Ù…Ú©Ù† Ø§Ø³Øª.
4ï¸âƒ£ Ø§Ú¯Ø± Ø²Ù…Ø§Ù† ØªÙ…Ø§Ù… Ø´Ø¯ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø²Ù…Ø§Ù† Ø¨ÛŒØ´ØªØ±ÛŒ Ø¨Ú¯ÛŒØ±ÛŒØ¯ ÛŒØ§ Ø¨Ø§Ø²ÛŒ Ø±Ø§ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒØ¯.

ğŸ¯ Ø¨Ø§ ØªÙ…Ø±ÛŒÙ†ØŒ Ù…Ù‡Ø§Ø±Øª Ø­Ù„ Ù¾Ø§Ø²Ù„ Ùˆ Ø³Ø±Ø¹Øª ÙˆØ§Ú©Ù†Ø´ Ø®ÙˆØ¯ Ø±Ø§ Ø§ÙØ²Ø§ÛŒØ´ Ø¯Ù‡ÛŒØ¯!
    `;
    document.getElementById('usageOutput').textContent = output;
  }

  // Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ù…ÛŒØ±Ø­Ø³ÛŒÙ†
  function showTeacher() {
    const output = `
ğŸ§‘â€ğŸ’» Ù†Ø§Ù…: Ø§Ù…ÛŒØ±Ø­Ø³ÛŒÙ†  
ğŸ‘¤ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ: Ø§Ù…Ø§Ù†ÛŒ  

ğŸ”¶ Ø¯Ø§Ù†Ø´Ø¬ÙˆÛŒ Ø±Ø´ØªÙ‡ Ù…Ù‡Ù†Ø¯Ø³ÛŒ Ú©Ø§Ù…Ù¾ÛŒÙˆØªØ± Ùˆ Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ Ø¨Ù‡ Ø¯Ù†ÛŒØ§ÛŒ Ø¨Ø§Ø²ÛŒâ€ŒØ³Ø§Ø²ÛŒ Ùˆ ØªÙˆØ³Ø¹Ù‡ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù†â€ŒÙ‡Ø§ÛŒ ØªØ­Øª ÙˆØ¨ Ø§Ø³Øª.

ğŸ”¶ Ø§Ùˆ ØªØ¬Ø±Ø¨Ù‡â€ŒÛŒ Ø³Ø§Ø®Øª Ø§Ù†ÙˆØ§Ø¹ Ø¨Ø§Ø²ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ† Ùˆ Ø¢ÙÙ„Ø§ÛŒÙ† ØªØ­Øª Ø´Ø¨Ú©Ù‡ Ø±Ø§ Ø¯Ø§Ø±Ø¯ Ùˆ Ù‡Ù…ÛŒØ´Ù‡ Ø¨Ù‡ Ø¯Ù†Ø¨Ø§Ù„ Ø®Ù„Ù‚ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ù„Ø§Ù‚Ø§Ù†Ù‡ Ùˆ Ù‡ÙˆØ´Ù…Ù†Ø¯Ø§Ù†Ù‡ Ø§Ø³Øª.

ğŸ”¶ ØªÙ…Ø±Ú©Ø² Ø§Ù…ÛŒØ±Ø­Ø³ÛŒÙ† Ø±ÙˆÛŒ Ø³Ø§Ø®Øª Ù¾Ù„ØªÙØ±Ù…â€ŒÙ‡Ø§ÛŒÛŒ Ø§Ø³Øª Ú©Ù‡ Ø¨ØªÙˆØ§Ù†Ù†Ø¯ ØªØ¬Ø±Ø¨Ù‡â€ŒØ§ÛŒ Ù†ÙˆØ¢ÙˆØ±Ø§Ù†Ù‡ Ùˆ Ø¬Ø°Ø§Ø¨ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ÙØ±Ø§Ù‡Ù… Ú©Ù†Ù†Ø¯.

âœ³ï¸ Ø¨Ø§ ØªØ±Ú©ÛŒØ¨ Ø¯Ø§Ù†Ø´ Ù…Ù‡Ù†Ø¯Ø³ÛŒ Ùˆ Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒ Ø¨Ù‡ ÙÙ†Ø§ÙˆØ±ÛŒâ€ŒÙ‡Ø§ÛŒ Ù†ÙˆÛŒÙ†ØŒ Ø§Ùˆ ØªÙ„Ø§Ø´ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ ØªØ§ Ø§ÛŒØ¯Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ù‡ Ø¨Ù‡ØªØ±ÛŒÙ† Ø´Ú©Ù„ Ù…Ù…Ú©Ù† Ø¨Ù‡ ÙˆØ§Ù‚Ø¹ÛŒØª ØªØ¨Ø¯ÛŒÙ„ Ú©Ù†Ø¯.  
    `;
    document.getElementById('teacherOutput').textContent = output;
  }


  // Ø§Ù„Ù…Ø§Ù†â€ŒÙ‡Ø§
  const grid = document.getElementById('grid');
  const clickCountEl = document.getElementById('clickCount');
  const timerEl = document.getElementById('timer');
  const restartBtn = document.getElementById('restartBtn');
  const changeSettingsBtn = document.getElementById('changeSettingsBtn');
  const settingsOverlay = document.getElementById('settingsOverlay');
  const startGameBtn = document.getElementById('startGameBtn');
  const gridSizeSelect = document.getElementById('gridSizeSelect');

  const recordBoard = document.getElementById('recordBoard');

  // Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø¨Ø§Ø²ÛŒ
  let gridSize = 5;
  let difficulty = 3;
  let clickCount = 0;
  let timer = 0;
  let timerInterval = null;
  let timeLimit = 60; // Ø²Ù…Ø§Ù† Ù¾ÛŒØ´ ÙØ±Ø¶ØŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø´Ø¯Ù‡ Ø¨Ø¹Ø¯Ø§
  let timeOverCount = 0;
  let gameActive = false;

  // Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§ Ø¯Ø± localStorage Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒØ´Ù‡
  // Ø³Ø§Ø®ØªØ§Ø±: { "5x5-3": 42 }
  let records = JSON.parse(localStorage.getItem('lightPuzzleRecords') || '{}');

  // Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ù†Ø¯Ø§Ø²Ù‡ Ø´Ø¨Ú©Ù‡
  function fillGridSizeOptions() {
    for(let i=3; i<=10; i++){
      const opt = document.createElement('option');
      opt.value = i;
      opt.textContent = `${i} Ã— ${i}`;
      gridSizeSelect.appendChild(opt);
    }
  }

  fillGridSizeOptions();

  // Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ ÙØ±Ù… Ø¨Ø§ Ù…Ù‚Ø¯Ø§Ø± Ù¾ÛŒØ´ÙØ±Ø¶
  gridSizeSelect.value = gridSize;
  document.querySelector(`#diff${difficulty}`).checked = true;

  // Ù†Ù…Ø§ÛŒØ´ Ø±Ú©ÙˆØ±Ø¯ ÙØ¹Ù„ÛŒ
  function updateRecordDisplay() {
    const key = `${gridSize}x${gridSize}-${difficulty}`;
    const rec = records[key] || 0;
    recordBoard.textContent = rec
      ? `ğŸ† Ø¨Ù‡ØªØ±ÛŒÙ† Ø±Ú©ÙˆØ±Ø¯ Ø¨Ø±Ø§ÛŒ ${key}: ${rec} Ú©Ù„ÛŒÚ©`
      : 'ğŸ® Ù‡Ù†ÙˆØ² Ø±Ú©ÙˆØ±Ø¯ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª!';
  }

  updateRecordDisplay();

  // ØªØ§Ø¨Ø¹ Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ Ùˆ Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¨Ú©Ù‡
  function createGrid() {
    grid.innerHTML = '';
    grid.style.gridTemplateColumns = `repeat(${gridSize}, 55px)`;
    grid.style.gridTemplateRows = `repeat(${gridSize}, 55px)`;

    // Ø´Ø±ÙˆØ¹ Ù‡Ù…Ù‡ Ø®Ø§Ù…ÙˆØ´
    for(let r=0; r<gridSize; r++){
      for(let c=0; c<gridSize; c++){
        const cell = document.createElement('div');
        cell.classList.add('cell');
        cell.dataset.row = r;
        cell.dataset.col = c;
        cell.addEventListener('click', onCellClick);
        grid.appendChild(cell);
      }
    }
  }

  // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø²Ù…Ø§Ù† Ø¨Ø± Ø§Ø³Ø§Ø³ Ø§Ù†Ø¯Ø§Ø²Ù‡ Ùˆ Ø³Ø®ØªÛŒ (Ù…Ø«Ø§Ù„)
  function calculateTimeLimit(size, diff) {
    // Ù¾Ø§ÛŒÙ‡: 10 Ø«Ø§Ù†ÛŒÙ‡ Ø¨Ù‡ Ø§Ø²Ø§ÛŒ Ù‡Ø± Ø®Ø§Ù†Ù‡ØŒ Ø³Ø·Ø­ Ø¶Ø±ÛŒØ¨ Ù…ÛŒÚ¯ÛŒØ±Ù‡
    const base = size * size * 10;
    const diffMultiplier = [1.8, 1.4, 1, 0.7, 0.5];
    return Math.max(10, Math.floor(base * diffMultiplier[diff - 1]));
  }

  // Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ú†ÛŒØ¯Ù…Ø§Ù† Ø§ÙˆÙ„ÛŒÙ‡ Ø¨Ø§ Ø³Ø·Ø­ Ø³Ø®ØªÛŒ
  function setupInitialGrid() {
    // Ù‡Ù…Ù‡ Ø®Ø§Ù…ÙˆØ´ Ø§ÙˆÙ„
    for(let i=0; i<grid.children.length; i++){
      grid.children[i].classList.remove('on');
    }
    // Ú†ÛŒØ¯Ù…Ø§Ù† ØªØµØ§Ø¯ÙÛŒ Ø¨Ù‡ ØªØ¹Ø¯Ø§Ø¯ Ø®Ø§Ù†Ù‡â€ŒÙ‡Ø§ÛŒ Ø±ÙˆØ´Ù†ØŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø³Ø·Ø­ Ø³Ø®ØªÛŒ
    // Ø³Ø·Ø­ 1: 10% Ø±ÙˆØ´Ù†
    // Ø³Ø·Ø­ 2: 20%
    // Ø³Ø·Ø­ 3: 35%
    // Ø³Ø·Ø­ 4: 50%
    // Ø³Ø·Ø­ 5: 70%

    const onPercent = [0.1, 0.2, 0.35, 0.5, 0.7][difficulty - 1];
    const totalCells = gridSize * gridSize;
    const onCount = Math.floor(totalCells * onPercent);

    // Ø±ÙˆØ´Ù† Ú©Ø±Ø¯Ù† ØªØ¹Ø¯Ø§Ø¯ Ù…Ø´Ø®Øµ Ø®Ø§Ù†Ù‡â€ŒÙ‡Ø§ Ø¨ØµÙˆØ±Øª ØªØµØ§Ø¯ÙÛŒ (Ø¨Ø¯ÙˆÙ† ØªØ¶Ù…ÛŒÙ† Ø­Ù„)
    let indices = [...Array(totalCells).keys()];
    indices = shuffle(indices);

    for(let i=0; i<onCount; i++){
      grid.children[indices[i]].classList.add('on');
    }
  }

  // Ø´ÙÙ„ Ø¢Ø±Ø§ÛŒÙ‡
  function shuffle(arr){
    for(let i=arr.length-1; i>0; i--){
      const j = Math.floor(Math.random()*(i+1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
    return arr;
  }

  // ÙˆÙ‚ØªÛŒ Ø³Ù„ÙˆÙ„ Ú©Ù„ÛŒÚ© Ø´Ø¯
  function onCellClick(e){
    if(!gameActive) return;
    clickCount++;
    clickCountEl.textContent = `Ú©Ù„ÛŒÚ©â€ŒÙ‡Ø§: ${clickCount}`;
    const r = +e.target.dataset.row;
    const c = +e.target.dataset.col;

    toggleCell(r, c);
    toggleCell(r-1, c);
    toggleCell(r+1, c);
    toggleCell(r, c-1);
    toggleCell(r, c+1);

    if(checkWin()){
      gameWin();
    }
  }

  function toggleCell(r, c){
    if(r<0 || c<0 || r>=gridSize || c>=gridSize) return;
    const idx = r*gridSize + c;
    grid.children[idx].classList.toggle('on');
  }

  // Ø¨Ø±Ø±Ø³ÛŒ Ø¨Ø±Ø¯ (Ù‡Ù…Ù‡ Ø®Ø§Ù…ÙˆØ´)
  function checkWin(){
    for(let i=0; i<grid.children.length; i++){
      if(grid.children[i].classList.contains('on')) return false;
    }
    return true;
  }

  // ÙˆÙ‚ØªÛŒ Ø¨Ø§Ø²ÛŒ ØªÙ…ÙˆÙ… Ø´Ø¯
  function gameWin(){
    clearInterval(timerInterval);
    gameActive = false;
    alert(`ğŸ‰ ØªØ¨Ø±ÛŒÚ©! Ù‡Ù…Ù‡ Ú†Ø±Ø§Øºâ€ŒÙ‡Ø§ Ø®Ø§Ù…ÙˆØ´ Ø´Ø¯Ù†Ø¯!\nØªØ¹Ø¯Ø§Ø¯ Ú©Ù„ÛŒÚ©â€ŒÙ‡Ø§: ${clickCount}\nØ²Ù…Ø§Ù† Ø³Ù¾Ø±ÛŒ Ø´Ø¯Ù‡: ${timeLimit - timer} Ø«Ø§Ù†ÛŒÙ‡`);

    // Ø°Ø®ÛŒØ±Ù‡ Ø±Ú©ÙˆØ±Ø¯
    const key = `${gridSize}x${gridSize}-${difficulty}`;
    const prevRecord = records[key] || Infinity;
    if(clickCount < prevRecord){
      records[key] = clickCount;
      localStorage.setItem('lightPuzzleRecords', JSON.stringify(records));
      updateRecordDisplay();
      alert('ğŸ† Ø±Ú©ÙˆØ±Ø¯ Ø¬Ø¯ÛŒØ¯ Ø«Ø¨Øª Ø´Ø¯!');
    }

    // Ø¨Ø¹Ø¯ Ø§Ø² Ø¨Ø±Ø¯ØŒ Ù¾Ø§Ù¾â€ŒØ¢Ù¾ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…ÛŒØ§Ø¯ Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²ÛŒ Ø¬Ø¯ÛŒØ¯
    showSettings();
  }

  // Ø´Ø±ÙˆØ¹ ØªØ§ÛŒÙ…Ø±
  function startTimer(){
    timer = timeLimit;
    updateTimerDisplay();
    timerInterval = setInterval(() => {
      timer--;
      updateTimerDisplay();
      if(timer <= 0){
        clearInterval(timerInterval);
        gameActive = false;
        onTimeOver();
      }
    }, 1000);
  }

  // Ø¨Ø±ÙˆØ² Ø±Ø³Ø§Ù†ÛŒ Ø±Ù†Ú¯ Ùˆ Ù…ØªÙ† ØªØ§ÛŒÙ…Ø±
  function updateTimerDisplay(){
    timerEl.textContent = `Ø²Ù…Ø§Ù†: ${timer} Ø«Ø§Ù†ÛŒÙ‡`;
    timerEl.classList.remove('green','yellow','orange','red','blink');

    if(timer > timeLimit*0.5) timerEl.classList.add('green');
    else if(timer > timeLimit*0.25) timerEl.classList.add('yellow');
    else if(timer > 10) timerEl.classList.add('orange');
    else if(timer > 5) timerEl.classList.add('red');
    else {
      timerEl.classList.add('red','blink');
    }
  }

  // Ø²Ù…Ø§Ù† ØªÙ…ÙˆÙ… Ø´Ø¯Ù‡
  function onTimeOver(){
    timeOverCount++;
    const again = confirm('â° Ø²Ù…Ø§Ù† Ø´Ù…Ø§ ØªÙ…Ø§Ù… Ø´Ø¯!\nØ¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø²Ù…Ø§Ù† Ø¨ÛŒØ´ØªØ±ÛŒ Ø¨Ú¯ÛŒØ±ÛŒØ¯ØŸ');
    if(again){
      startTimer();
      timerEl.textContent += ` (Ø²Ù…Ø§Ù† Ø§Ø¶Ø§ÙÙ‡: ${timeOverCount})`;
      gameActive = true;
    } else {
      alert('Ø¨Ø§Ø²ÛŒ ØªÙ…Ø§Ù… Ø´Ø¯! Ø¨Ù‡ ØµÙØ­Ù‡ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯ÛŒÙ….');
      showSettings();
    }
  }

  // Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ Ø¨Ø§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ÙØ¹Ù„ÛŒ
  function startGame(){
    clickCount = 0;
    clickCountEl.textContent = `Ú©Ù„ÛŒÚ©â€ŒÙ‡Ø§: 0`;
    gameActive = true;
    timeOverCount = 0;

    createGrid();
    setupInitialGrid();

    timeLimit = calculateTimeLimit(gridSize, difficulty);
    startTimer();

    settingsOverlay.style.display = 'none';
  }

  // Ù†Ù…Ø§ÛŒØ´ Ù¾Ø§Ù¾â€ŒØ¢Ù¾ ØªÙ†Ø¸ÛŒÙ…Ø§Øª
  function showSettings(){
    settingsOverlay.style.display = 'flex';
    updateRecordDisplay();
  }

  // Ø¯Ú©Ù…Ù‡ Ø´Ø±ÙˆØ¹ Ø¨Ø§Ø²ÛŒ Ø¯Ø± Ù¾Ø§Ù¾â€ŒØ¢Ù¾
  startGameBtn.addEventListener('click', () => {
    const size = parseInt(gridSizeSelect.value);
    const diffRadio = document.querySelector('input[name="difficulty"]:checked');
    const diff = diffRadio ? parseInt(diffRadio.value) : 3;

    if(size < 3 || size > 10) {
      alert('Ø§Ù†Ø¯Ø§Ø²Ù‡ Ø¨Ø§ÛŒØ¯ Ø¨ÛŒÙ† Û³ Ùˆ Û±Û° Ø¨Ø§Ø´Ø¯.');
      return;
    }

    gridSize = size;
    difficulty = diff;
    startGame();
  });

  // Ø¯Ú©Ù…Ù‡ Ø´Ø±ÙˆØ¹ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¨Ø§Ø²ÛŒ Ø¨Ø§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ÙØ¹Ù„ÛŒ
  restartBtn.addEventListener('click', () => {
    if(!gameActive){
      alert('Ø¨Ø§Ø²ÛŒ Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ Ù†ÛŒØ³Øª.');
      return;
    }
    clickCount = 0;
    clickCountEl.textContent = `Ú©Ù„ÛŒÚ©â€ŒÙ‡Ø§: 0`;
    setupInitialGrid();
    clearInterval(timerInterval);
    timeLimit = calculateTimeLimit(gridSize, difficulty);
    startTimer();
  });

  // Ø¯Ú©Ù…Ù‡ ØªØºÛŒÛŒØ± Ù…Ø­ÛŒØ· (Ù†Ù…Ø§ÛŒØ´ Ù…Ø¬Ø¯Ø¯ Ù¾Ø§Ù¾â€ŒØ¢Ù¾)
  changeSettingsBtn.addEventListener('click', () => {
    clearInterval(timerInterval);
    gameActive = false;
    showSettings();
  });

  // ÙˆÙ‚ØªÛŒ ØµÙØ­Ù‡ Ù„ÙˆØ¯ Ø´Ø¯ Ù¾Ø§Ù¾â€ŒØ¢Ù¾ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯
  window.addEventListener('load', () => {
    showSettings();
  });

  
</script>

</body>
</html>
